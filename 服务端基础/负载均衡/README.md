[![返回目录](https://i.postimg.cc/WzXsh0MX/image.png)](https://parg.co/UdT)

# 负载均衡

为了解决应用实例的可扩展、可用性、安全性问题，在不同的应用实例间分配传入的流量，需要依赖于一些负载均衡解决方案。

- LVS，基本上当前线上所有应用的入口，最前面都会架一层 LVS，解决后端七层负载均衡器的扩展的问题

- HAProxy，当前我们有小部分业务使用到了 HAProxy 来解决，更早期因为 Nginx 的 TCP Load Balancer 不支持(当前已经支持)，所以 HAProxy 在四层负载均衡层面有功能优势，并且 HAProxy 在性能情况表现也不错。不过随着 Nginx 对于 TCP Load Balancer 的支持和稳定后，HAProxy 是否有一些其他适用的场景，到时再结合着做考究

- Nginx，当前是我们主要在使用的七层负载均衡的解决方案，目前在 Proxy 层我们主要是使用 Tengine 的开源解决方案，然后同时我们也围绕着 Nginx，基于 LUA 也有做了一些相关的扩展，比如流控等相关功能。

比如公有云 AWS ELB 提供了两种类型的负载均衡器：

- Classic 负载均衡器，可基于应用程序或网络级信息路由流量，适用于在多个 EC2 实例之间进行简单的流量负载均衡

- 应用程序负载均衡器，可基于包括请求内容的高级应用程序级信息路由流量，适用于需要高级路由功能、微服务和基于容器的架构的应用程序。应用程序负载均衡器可将流量路由至多个服务，也可在同一 EC2 实例的多个端口之间进行负载均衡

# Todos

- https://zhuanlan.zhihu.com/p/36054372

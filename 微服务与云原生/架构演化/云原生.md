# 云原生

微服务架构非常适合云原生应用程序。云原生应用程序简单地定义为从头开始为云计算架构而构建应用程序。这意味着，如果我们将应用程序设计为预期将部署在分布式、可扩展的基础架构上，我们的应用程序就是云原生的。

云计算将是主流的 IT 能力交付方式，尤其是公共云将承载越来越多的算力；其背后主要驱动力是经济学的考量。作为云厂商而言最重要的是在这个竞争中获胜。云计算最大的一个公开秘密由于存在数据引力场效应，云平台会锁定客户而且会逐渐吸引客户的 IT 设施加速迁云。所以对于云厂商而言最重要的是规模的扩张，争夺客户并尽早将客户 IT 基础设施迁移到云端。

云原生是保障系统能力灵动性地有效抓手；云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用；云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式 API 等。这些技术组合搭配，能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术能够使工程师轻松地对系统作出频繁和可预测的重大变更。

云原生同样存在着一定的限制，如果你的云原生应用程序部署在 AWS 等公有云上，则云原生 API 不是跨云平台的。因此，应用程序中使用的 DynamoDB 数据库 API 仅适用于 AWS，但不适用于 Azure，因为 DynamoDB 仅属于 AWS。API 也永远不会在本地环境中工作，因为 DynamoDB 在生产中只能在 AWS 中用。

# Serverless | 无服务器架构

无服务器架构是一种新的软件架构范式，它因为 AWS Lambda 服务而推广。

## FaaS

FaaS 的理念是，诸如亚马逊之类的云提供商甚至是诸如 Fission.io 或 funktion 之类的本地软件都可以提供服务，其中用户可以请求远程运行的功能以执行非常特定的任务。功能结束后，这些结果将返回给用户。不维护任何服务或有状态数据，并且用户将功能代码提供给运行该功能的服务。

无服务器架构的优势在于，不需要配置虚拟机和/或容器来构建利用 FaaS 的应用程序部分。一旦它们的功能结束，运行这些功能的计算实例从用户的角度来看就不再存在。此外，需要由用户监控和维护的微服务和/或容器的数量减少，节省了成本、时间和精力。

无服务器架构为软件工程师和架构师提供了另一种功能强大的软件构建工具，可用于设计灵活且可扩展的软件。已知的 FaaS 有 Amazon 的 AWS Lambda、Microsoft 的 Azure Functions、Google 的 Cloud Functions 等。

### 缺陷

与微服务和云原生应用程序类似，无服务器架构并不适用于所有场景。

FaaS 提供的功能本身并不保持状态，这意味着在编写功能代码时需要特别注意。这与全微服务不同——开发人员可以完全控制状态。尽管有这种限制，但在 FaaS 的情况下保持状态的一种方法是将状态传播到数据库或像 Redis 这样的内存缓存。

这些功能的启动时间并不总是很快，因为要有时间分配给 FaaS 服务提供商发送请求，然后在某些情况下启动运行该功能的计算实例也需要时间。在设计无服务器应用程序时必须考虑这些延迟。

FaaS 不像微服务那样持续运行，这使得它们不适合任何需要持续运行软件的任务。

无服务器应用程序具有与其他云原生应用程序相同的限制，其中应用程序从一个云提供商到另一个云提供商，或从云到本地环境的可移植性因供应商锁定而变得具有挑战性。

## BaaS

无服务器应用程序的另一个定义是使用 BaaS 或后端作为服务范式的应用程序。 BaaS 的想法是，开发人员只编写其应用程序的客户端代码，然后依赖于托管在云中的多个软件预构建服务（可通过 API 访问）。BaaS 在移动应用程序编程中很受欢迎，开发人员可以依赖大量的后端服务来驱动应用程序的大部分功能。 BaaS 服务的例子有：Firebase 和 Parse。
